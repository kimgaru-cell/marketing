<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대표 키워드 추출기</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
    html {
      scroll-behavior: smooth;
    }
    </style>
</head>

<body>
<!-- 헤더 영역 -->
<div id="menu-container"></div>
    
  <section class="max-w-xl mx-auto text-center py-16 px-4">
    <h1 class="text-3xl font-bold text-indigo-600 mb-6">스마트플레이스 대표 키워드 추출기</h1>
    <form id="analyze-form">
      <input type="text" id="place-url" placeholder="네이버 지도 링크 또는 스마트플레이스 링크를 입력하세요" size="50" required />
      <button type="submit">대표 키워드 분석</button>
    </form>
    <div id="result" style="margin-top:20px;"></div>
  </section>
    
<!-- 푸터 영역 -->
<div id="footer-placeholder"></div>
    
<!-- JS 연결 -->
<script src="public/js/loadMenu.js" defer></script>
<script src="public/js/loadFooter.js" defer></script>

 <script>
  document.getElementById('analyze-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      let url = document.getElementById('place-url').value.trim();
    
      if (!url.includes('naver.com')) {
        document.getElementById('result').innerText = '유효한 네이버 지도 또는 스마트플레이스 URL을 입력해주세요.';
        return;
      }
    
      const match = url.match(/place\/(\d{7,})/);
    
      if (url.includes('map.naver.com') && match) {
        const placeId = match[1];
        url = `https://pcmap.place.naver.com/restaurant/${placeId}/home`;
      }
    
      document.getElementById('result').innerText = '분석 중입니다...';
    
      const response = await fetch('/.netlify/functions/get-keywords', {
        method: 'POST',
        body: JSON.stringify({ placeUrl: url }),
      });
    
      const data = await response.json();
      if (data.keywords) {
        document.getElementById('result').innerText = '대표 키워드: ' + data.keywords.join(', ');
      } else {
        document.getElementById('result').innerText = '키워드를 찾을 수 없습니다.';
      }
    });
 </script>


</body>
</html>
